package servlet.listener;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.util.ArrayList;

import javax.servlet.ServletContext;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

import vo.Student;

public class DriverListener implements ServletContextListener {
	private ServletContext cont;
	private ArrayList<Student> studentDB;
	private Connection conn;
	
	public void contextDestroyed(ServletContextEvent arg0) {
		// TODO Auto-generated method stub
		
	}

	public void contextInitialized(ServletContextEvent arg0) {
		cont = arg0.getServletContext();
		try {
			Class.forName(cont.getInitParameter("ODriver"));
			System.out.println("Driver Successfully Loaded !");
			
			String url = cont.getInitParameter("ODriverURL");
			String dbUser = cont.getInitParameter("ODriverUserName");
			String dbPassword = cont.getInitParameter("ODriverPassword");
			
			System.out.println("Connecting..");
			conn = DriverManager.getConnection(url, dbUser, dbPassword);
			System.out.println("Connection Success !");
					
		} catch (ClassNotFoundException e) {
			System.out.println("Driver Not Found !");
		} catch (SQLException e) {
			System.out.println("Connection Closed !! ");
		}
	}
	
}
